(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.shave=a())}(this,(function(){function a(y,r,o){if(!r){throw Error("maxHeight is required")}var g=typeof y==="string"?document.querySelectorAll(y):y;if(!("length" in g)){g=[g]}var k={character:"â€¦",classname:"js-shave",spaces:true};var d=o&&o.character||k.character;var x=o&&o.classname||k.classname;var j=o&&o.spaces===false?false:k.spaces;var q='<span class="js-shave-char">'+d+"</span>";for(var v=0;v<g.length;v++){var e=g[v];var u=e.querySelector("."+x);var f=e.textContent===undefined?"innerText":"textContent";if(u){e.removeChild(e.querySelector(".js-shave-char"));e[f]=e[f]}var n=e[f];var p=j?n.split(" "):n;if(p.length<2){continue}var w=e.style.height;e.style.height="auto";var l=e.style.maxHeight;e.style.maxHeight="none";if(e.offsetHeight<r){e.style.height=w;e.style.maxHeight=l;continue}var t=p.length-1;var s=0;var h=void 0;while(s<t){h=s+t+1>>1;e[f]=j?p.slice(0,h).join(" "):p.slice(0,h);e.insertAdjacentHTML("beforeend",q);if(e.offsetHeight>r){t=j?h-1:h-2}else{s=h}}e[f]=j?p.slice(0,t).join(" "):p.slice(0,t);e.insertAdjacentHTML("beforeend",q);var m=j?p.slice(t+1).join(" "):p.slice(t);e.insertAdjacentHTML("beforeend",'<span class="'+x+'" style="display:none;">'+m+"</span>");e.style.height=w;e.style.maxHeight=l}}if(typeof window!=="undefined"){var b=window.jQuery||window.Zepto;if(b){b.fn.shave=function c(e,d){a(this,e,d);return this}}}return a})));