!function(a){window.Typeahead=function(c,b){this.$element=a(c);this.options=a.extend({},a.fn.typeahead.defaults,b);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=a(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=false;this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var b=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(b)).change();return this.hide()},updater:function(b){return b},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:b.top+b.height,left:b.left});this.$menu.show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(c){var b;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source;return b?this.process(b):this},process:function(b){var c=this;b=a.grep(b,function(d){return c.matcher(d)});b=this.sorter(b);if(!b.length){return this.shown?this.hide():this}return this.render(b.slice(0,this.options.items)).show()},matcher:function(b){return ~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(d){var e=[],c=[],b=[],f;while(f=d.shift()){if(!f.toLowerCase().indexOf(this.query.toLowerCase())){e.push(f)}else{if(~f.indexOf(this.query)){c.push(f)}else{b.push(f)}}}return e.concat(c,b)},highlighter:function(b){var c=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return b.replace(new RegExp("("+c+")","ig"),function(d,e){return"<strong>"+e+"</strong>"})},render:function(b){var c=this;b=a(b).map(function(d,e){d=a(c.options.item).attr("data-value",e);d.find("a").html(c.highlighter(e));return d[0]});b.first().addClass("active");this.$menu.html(b);return this},next:function(c){var d=this.$menu.find(".active").removeClass("active"),b=d.next();if(!b.length){b=a(this.$menu.find("li")[0])}b.addClass("active")},prev:function(c){var d=this.$menu.find(".active").removeClass("active"),b=d.prev();if(!b.length){b=this.$menu.find("li").last()}b.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",a.proxy(this.keydown,this))}this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},eventSupported:function(b){var c=b in this.$element;if(!c){this.$element.setAttribute(b,"return;");c=typeof this.$element[b]==="function"}return c},move:function(b){if(!this.shown){return}switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:b.preventDefault();this.prev();break;case 40:b.preventDefault();this.next();break}b.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]);this.move(b)},keypress:function(b){if(this.suppressKeyPressRepeat){return}this.move(b)},keyup:function(b){switch(b.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}b.stopPropagation();b.preventDefault()},blur:function(c){var b=this;setTimeout(function(){b.hide()},150)},click:function(b){b.stopPropagation();b.preventDefault();this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active");a(b.currentTarget).addClass("active")}};a.fn.typeahead=function(b){return this.each(function(){var e=a(this),d=e.data("typeahead"),c=typeof b=="object"&&b;if(!d){e.data("typeahead",(d=new Typeahead(this,c)))}if(typeof b=="string"){d[b]()}})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};a.fn.typeahead.Constructor=Typeahead;a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(c){var b=a(this);if(b.data("typeahead")){return}c.preventDefault();b.typeahead(b.data())})}(window.jQuery);