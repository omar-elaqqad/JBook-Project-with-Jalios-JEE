(function(c,b,a,d){c.fn.simpleLightbox=function(j){var j=c.extend({overlay:true,spinner:true,nav:true,navText:["&lsaquo;","&rsaquo;"],captions:true,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",close:true,closeText:"Ã—",showCounter:true,fileExt:"png|jpg|jpeg|gif",animationSlide:true,animationSpeed:250,preloading:true,enableKeyboard:true,loop:true,docClose:true,swipeTolerance:50,className:"simple-lightbox",widthRatio:0.8,heightRatio:0.9,disableRightClick:false,disableScroll:true,alertError:true,alertErrorMessage:"Image not found, next image will be loaded"},j);var H=("ontouchstart" in b),t=b.navigator.pointerEnabled||b.navigator.msPointerEnabled,L=function(N){if(H){return true}if(!t||typeof N==="undefined"||typeof N.pointerType==="undefined"){return false}if(typeof N.MSPOINTER_TYPE_MOUSE!=="undefined"){if(N.MSPOINTER_TYPE_MOUSE!=N.pointerType){return true}}else{if(N.pointerType!="mouse"){return true}}return false},n=0,u=c(),C=function(){var N=a.body||a.documentElement,N=N.style;if(N.WebkitTransition==""){return"-webkit-"}if(N.MozTransition==""){return"-moz-"}if(N.OTransition==""){return"-o-"}if(N.transition==""){return""}return false},M=false,g=c(this.selector,this.context),C=C(),I=(C!==false)?true:false,E="simplelb",J=c("<div>").addClass("sl-overlay"),D=c("<button>").addClass("sl-close").html(j.closeText),m=c("<div>").addClass("sl-spinner").html("<div></div>"),p=c("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+j.navText[0]+'</button><button class="sl-next">'+j.navText[1]+"</button>"),q=c("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),y=false,o=0,w=c(),K=c("<div>").addClass("sl-caption pos-"+j.captionPosition),l=c("<div>").addClass("sl-wrapper").addClass(j.className).html('<div class="sl-image"></div>'),z=function(N){if(!j.fileExt){return true}return c(N).prop("tagName").toLowerCase()=="a"&&(new RegExp(".("+j.fileExt+")$","i")).test(c(N).attr("href"))},x=function(){w=c(".sl-image");if(j.close){D.appendTo(l)}if(j.showCounter){if(g.length>1){q.appendTo(l);q.find(".sl-total").text(g.length)}}if(j.nav){p.appendTo(l)}if(j.spinner){m.appendTo(l)}},h=function(N){N.trigger(c.Event("show.simplelightbox"));if(j.disableScroll){B("hide")}l.appendTo("body");if(j.overlay){J.appendTo(c("body"))}y=true;o=g.index(N);u=c("<img/>").hide().attr("src",N.attr("href"));c(".sl-image").html("").attr("style","");u.appendTo(c(".sl-image"));J.fadeIn("fast");c(".sl-close").fadeIn("fast");m.show();p.fadeIn("fast");c(".sl-wrapper .sl-counter .sl-current").text(o+1);q.fadeIn("fast");k();if(j.preloading){r()}setTimeout(function(){N.trigger(c.Event("shown.simplelightbox"))},j.animationSpeed)},k=function(O){if(!u.length){return}var N=new Image(),P=c(b).width()*j.widthRatio,Q=c(b).height()*j.heightRatio;N.src=u.attr("src");c(N).bind("error",function(R){g.eq(o).trigger(c.Event("error.simplelightbox"));y=false;M=true;m.hide();if(j.alertError){alert(j.alertErrorMessage);if(O==1||O==-1){i(O)}else{i(1)}return}});N.onload=function(){if(typeof O!=="undefined"){g.eq(o).trigger(c.Event("changed.simplelightbox")).trigger(c.Event((O===1?"nextDone":"prevDone")+".simplelightbox"))}var S=N.width,R=N.height;if(S>P||R>Q){var V=S/R>P/Q?S/P:R/Q;S/=V;R/=V}c(".sl-image").css({top:(c(b).height()-R)/2+"px",left:(c(b).width()-S)/2+"px"});m.hide();u.css({width:S+"px",height:R+"px"}).fadeIn("fast");M=true;var T=(j.captionSelector=="self")?g.eq(o):g.eq(o).find(j.captionSelector);if(j.captionType=="data"){var W=T.data(j.captionsData)}else{if(j.captionType=="text"){var W=T.html()}else{var W=T.prop(j.captionsData)}}if(!j.loop){if(o==0){c(".sl-prev").hide()}if(o>=g.length-1){c(".sl-next").hide()}if(o>0&&o<g.length-1){c(".sl-prev, .sl-next").show()}}if(g.length==1){c(".sl-prev, .sl-next").hide()}if(O==1||O==-1){var U={opacity:1};if(j.animationSlide){if(I){e(0,100*O+"px");setTimeout(function(){e(j.animationSpeed/1000,0+"px"),50})}else{U.left=parseInt(c(".sl-image").css("left"))+100*O+"px"}}c(".sl-image").animate(U,j.animationSpeed,function(){y=false;s(W)})}else{y=false;s(W)}}},s=function(N){if(N!=""&&typeof N!=="undefined"&&j.captions){K.html(N).hide().appendTo(c(".sl-image")).delay(j.captionDelay).fadeIn("fast")}},e=function(O,P){var N={};N[C+"transform"]="translateX("+P+")";N[C+"transition"]=C+"transform "+O+"s linear";c(".sl-image").css(N)},r=function(){var N=(o+1<0)?g.length-1:(o+1>=g.length-1)?0:o+1,O=(o-1<0)?g.length-1:(o-1>=g.length-1)?0:o-1;c("<img />").attr("src",g.eq(N).attr("href")).load(function(){g.eq(o).trigger(c.Event("nextImageLoaded.simplelightbox"))});c("<img />").attr("src",g.eq(O).attr("href")).load(function(){g.eq(o).trigger(c.Event("prevImageLoaded.simplelightbox"))})},i=function(N){g.eq(o).trigger(c.Event("change.simplelightbox")).trigger(c.Event((N===1?"next":"prev")+".simplelightbox"));m.show();var P=o+N;if(y||(P<0||P>=g.length)&&j.loop==false){return}o=(P<0)?g.length-1:(P>g.length-1)?0:P;c(".sl-wrapper .sl-counter .sl-current").text(o+1);var O={opacity:0};if(j.animationSlide){if(I){e(j.animationSpeed/1000,(-100*N)-n+"px")}else{O.left=parseInt(c(".sl-image").css("left"))+-100*N+"px"}}c(".sl-image").animate(O,j.animationSpeed,function(){setTimeout(function(){var Q=g.eq(o);u.attr("src",Q.attr("href"));c(".sl-caption").remove();k(N);if(j.preloading){r()}},100)})},v=function(){if(y){return}var O=g.eq(o),N=false;O.trigger(c.Event("close.simplelightbox"));c(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",function(){if(j.disableScroll){B("show")}c(".sl-wrapper, .sl-overlay").remove();if(!N){O.trigger(c.Event("closed.simplelightbox"))}N=true});u=c();M=false;y=false},B=function(N){if(N=="hide"){var S=b.innerWidth;if(!S){var Q=a.documentElement.getBoundingClientRect();S=Q.right-Math.abs(Q.left)}if(a.body.clientWidth<S){var R=a.createElement("div"),P=parseInt(c("body").css("padding-right"),10);R.className="sl-scrollbar-measure";c("body").append(R);var O=R.offsetWidth-R.clientWidth;c(a.body)[0].removeChild(R);c("body").data("padding",P);if(O>0){c("body").css({"padding-right":P+O,overflow:"hidden"})}}}else{c("body").css({"padding-right":c("body").data("padding"),overflow:"auto"})}};x();c(b).on("resize",k);g.on("click."+E,function(N){if(z(this)){N.preventDefault();if(y){return false}h(c(this))}});c(a).on("click",".sl-close",function(N){N.preventDefault();if(M){v()}});c(a).click(function(N){if(M){if((j.docClose&&c(N.target).closest(".sl-image").length==0&&c(N.target).closest(".sl-navigation").length==0)){v()}}});if(j.disableRightClick){c(a).on("contextmenu",".sl-image img",function(N){return false})}c(a).on("click",".sl-navigation button",function(N){N.preventDefault();n=0;i(c(this).hasClass("sl-next")?1:-1)});if(j.enableKeyboard){c(a).on("keyup."+E,function(O){O.preventDefault();n=0;if(M){var N=O.keyCode;if(N==27){v()}if(N==37||O.keyCode==39){i(O.keyCode==39?1:-1)}}})}var G=0,F=0,A=false,f=0;c(a).on("touchstart mousedown pointerdown MSPointerDown",".sl-image",function(N){if(A){return true}if(I){f=parseInt(w.css("left"))}A=true;G=N.originalEvent.pageX||N.originalEvent.touches[0].pageX;return false}).on("touchmove mousemove pointermove MSPointerMove",function(N){if(!A){return true}N.preventDefault();F=N.originalEvent.pageX||N.originalEvent.touches[0].pageX;n=G-F;if(j.animationSlide){if(I){e(0,-n+"px")}else{w.css("left",f-n+"px")}}}).on("touchend mouseup touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(N){if(A){A=false;if(Math.abs(n)>j.swipeTolerance){i(n>0?1:-1)}else{if(j.animationSlide){if(I){e(j.animationSpeed/1000,0+"px")}else{w.animate({left:f+"px"},j.animationSpeed/2)}}}}});this.open=function(N){N=N||c(this[0]);h(N)};this.next=function(){i(1)};this.prev=function(){i(-1)};this.close=function(){v()};this.destroy=function(){c(a).unbind("click."+E).unbind("keyup."+E);v();c(".sl-overlay, .sl-wrapper").remove()};return this}})(jQuery,window,document);