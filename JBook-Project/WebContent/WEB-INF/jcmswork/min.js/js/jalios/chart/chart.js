!function(d){var b=["cross","square","dash","dot","disc","zigzag","diagonal","diagonal-right-left","square","diamond","triangle"];var c=function(h,i,g){if(!h){return null}dataset=h.config.data.datasets[i];if(dataset){if(dataset.additionalData){return dataset.additionalData[g]}data=dataset.data[g].additionalData;if(data){return data}}return null};var a=Array.isArray?Array.isArray:function(g){return Object.prototype.toString.call(g)==="[object Array]"};var f=function(h,g){return typeof h==="undefined"?g:h};var e=function(i,h,g){return f(a(i)?i[h]:i,g)};if(!d.jalios){d.jalios={}}d.jalios.chart={updatePattern:function(g){var i={};var h=0;if(g.data){i.data={};if(g.data.datasets){i.data.datasets=[];g.data.datasets.each(function(k){if(k.backgroundColor){if(Array.isArray(k.backgroundColor)){newBackgroundColors=[];k.backgroundColor.each(function(l){newBackgroundColors.push(pattern.draw(b[h%b.length],l));h++});i.data.datasets.push({backgroundColor:newBackgroundColors})}else{var j=pattern.draw(b[h%b.length],k.backgroundColor);h++;i.data.datasets.push({backgroundColor:j})}}else{i.data.datasets.push({})}})}}return i},onChartClick:function(l,h){var i=this;var k=d(i.canvas);var m=k.data("jaliosChartId");if(h&&h.length>0){var g=[];var j=i.getElementAtEvent(l);d.each(j,function(){var p=this._datasetIndex;var n=this._index;var o=c(i,p,n);g.push({datasetIndex:p,index:n,additionalData:o})});$event=d.Event("jalios.chart.click",{chartEventInfos:{chart:i,id:m,data:g},originalEvent:l});k.trigger($event)}},generateAlignedLegend:function(g){g.legend.afterFit=function(){var i=this.width;if(!this.lineWidths){return}this.lineWidths=this.lineWidths.map(function(j,k){return i-12});this.options.labels.padding=15;this.options.labels.boxWidth=20};var h=g.data;if(h.labels.length&&h.datasets.length){return h.labels.map(function(q,o){var t=g.getDatasetMeta(0);var m=h.datasets[0];var k=t.data[o];var j=k&&k.custom||{};var l=e;var n=g.options.elements.arc;var s=j.backgroundColor?j.backgroundColor:l(m.backgroundColor,o,n.backgroundColor);var r=j.borderColor?j.borderColor:l(m.borderColor,o,n.borderColor);var p=j.borderWidth?j.borderWidth:l(m.borderWidth,o,n.borderWidth);return{text:q,fillStyle:s,strokeStyle:r,lineWidth:p,hidden:isNaN(m.data[o])||t.data[o].hidden,index:o}})}return[]}};d(document).ready(function(g){JcmsLogger.info("Chart JS","Init chart JS ")})}(window.jQuery);