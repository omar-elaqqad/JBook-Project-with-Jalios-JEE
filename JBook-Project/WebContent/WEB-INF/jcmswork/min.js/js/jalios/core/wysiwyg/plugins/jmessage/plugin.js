!function(a){tinymce.PluginManager.add("jmessage",function(d,b){var j="jalios:msg";var f="data-jalios-level";var c="div";var e="jalios-message";var h=d.getParam("message_template","<"+j+"></"+j+">");var g=d.getParam("message_placeholder","<"+c+' class="'+e+'"></'+c+">");d.on("ResolveName",function(l){var k=l.target;if(i(k)){l.name="jalios:message"}});function i(k){return k.nodeName.toUpperCase()===c.toUpperCase()&&d.dom.hasClass(k,e)}d.on("PreInit",function(){d.serializer.addNodeFilter(c,function(k){var n=k.length,p,o;while(n--){p=k[n];classNames=p.attr("class");if(classNames&&classNames.indexOf(e)!==-1){var l=classNames.match(/alert-([^\s]+)/);var q=l&&l.length>1?l[1]:"info";var m=a.wysiwyg.utils.node(h,d);a.wysiwyg.utils.moveChildren(p,m);m.attr(f,q);p.replace(m)}}});d.parser.addNodeFilter(j,function(k){var m=k.length,o,n;while(m--){o=k[m];var p=o.attr(f)||"info";var l=a.wysiwyg.utils.node(g,d);a.wysiwyg.utils.moveChildren(o,l);l.attr("class","alert alert-"+p+" "+e);o.replace(l)}})});a.wysiwyg.utils.addElementExitShortcut(d,{rootElement:function(k){var n=d.dom;var m=n.getParent(k,n.isBlock);var l=m.parentNode;return l.nodeName==="DIV"&&l.classList.contains("jalios-message")?l:null},paramName:"jmessage_new_element"})})}(window.jQuery);