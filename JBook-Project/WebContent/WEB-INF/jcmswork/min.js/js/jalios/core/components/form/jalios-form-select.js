!function(f){let handlebarTemplate;const g=function(j){if(!j.id){return j.text}if(f(j.element).closest(".js-select2-no-image").exists()){return j.text}let templateOptions=f(j.element).data("jalios-template-params");if(!templateOptions){return j.text}if(templateOptions.noIcon){return j.text}templateOptions.state=j;j=b(templateOptions);return f(j)};const d=function(j){if(!j.id){return j.text}if(!document.getElementById("hdb-form-selected")){return j.text}let templateParams=f(j.element).data("jaliosTemplateParams");if(!templateParams){return j.text}let template=a();if(templateParams&&templateParams.displayIconHtml){let imgHtml=templateParams.iconHtml;j=template({state:j,imgHtml:imgHtml,templateParams:templateParams})}else{if(templateParams&&templateParams.displayIcon){let icon=templateParams.icon;j=template({displayIcon:true,state:j,icon:icon,templateParams:templateParams})}else{return j.text}}return f(j)};const e={theme:"bootstrap",templateResult:g,templateSelection:d,minimumResultsForSearch:4,language:document.documentElement.lang};const h=function(){f(".select2-enumerate:not(.select2-type)").each(function(j,k){let $element=f(k);if($element.closest(".js-select2-disabled").exists()){return}let customOptions=$element.data("jalios-select-search-options");if(customOptions){customOptions=f.extend({},e,customOptions)}else{customOptions=e}$element.select2(customOptions)})};const c=function(){if(!handlebarTemplate){let source=document.getElementById("hdb-form-select").innerHTML;handlebarTemplate=Handlebars.compile(source)}};const a=function(j){let templateId="hdb-form-selected";if(j&&j.state){templateId=f(j.state.element).closest("select").data("jaliosHandlebarSelectedTemplateId")}return Handlebars.compile(document.getElementById(templateId).innerHTML)};const b=function(j){let customTemplateId=f(j.state.element).closest("select").data("jaliosHandlebarSelectTemplateId");if(customTemplateId){let source=document.getElementById(customTemplateId).innerHTML;let customTemplate=Handlebars.compile(source);return customTemplate(j)}else{return handlebarTemplate(j)}};f(document).ready(function(){c();h();f(document).on("jalios:refresh",function(j){let refresh=f.jalios.Event.match(j,"refresh","after");if(!refresh||!refresh.target){return}h()});f(document).on("jalios:refresh",function(j){let refresh=f.jalios.Event.match(j,"refresh","before");if(!refresh||!refresh.target){return}f(refresh.target).find("select").each(function(k,l){if(f(l).data("select2")&&f(l).prop("multiple")){f(l).select2("destroy")}})});f(document).on("select2:open",function(){document.querySelector(".select2-search__field").focus()});f(document).on("jalios:field",function(j){if(j.field.type==="addedField"){if(j.field.clones){j.field.clones.forEach(function(k){f(k).find(".form-control").removeClass("select2-hidden-accessible");f(k).find(".select2-container").remove()});h()}}});f(document).on("jalios:refresh",i)});const i=function(j){let refresh=f.jalios.Event.match(j,"refresh","after");if(!refresh||!refresh.target){return}c()}}(window.jQuery);