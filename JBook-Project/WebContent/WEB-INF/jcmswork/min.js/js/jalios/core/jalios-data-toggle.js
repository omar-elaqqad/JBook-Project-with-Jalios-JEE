!function(g){if(!g.jalios){g.jalios={}}var f=/(toggle|add|remove|sync|run):([\w-]+)/i;function a(j,k,i){this.target=k;this.swtch=j;this.position=i;this.self=true;this.clazz=true;this.attr=false;this.previous="";this.sync=true}a.prototype={constructor:a,getTarget:function(j){if(!this.target){return g(j)}var i=false;if(this.position){i=g(j)[this.position].apply(g(j),[this.target])}else{i=g(this.target)}if(!this.self){i=i.not(j)}return i},getAttribute:function(k,j){if(this.attr){return this.attr}var i=g(k).attr("data-jalios-target-attribute");return i?i:j}};var b=function(m,l,k){var j=g(m);var i=k.getTarget(m);if("add"==k.swtch){i.toggleClass(l,true)}else{if("remove"==k.swtch){i.toggleClass(l,false)}else{if("toggle"==k.swtch){i.removeClass(k.previous);i.toggleClass(l)}else{if("sync"==k.swtch){i.removeClass(k.previous);i.toggleClass(l,k.sync)}}}}};var e=function(n,k,j){var i=j.getTarget(n);var m=j.getAttribute(n,k);if("add"==j.swtch){i.attr(m,true)}else{if("remove"==j.swtch){i.attr(m,false)}else{if("toggle"==j.swtch){i.attr(m,function(p,o){return !o})}else{if("sync"==j.swtch){var l=g(n).is(":checked");i.prop(m,l)}}}}};var d=function(p,l,k){var j=g(p);var n=j.attr(l);var m=k.getAttribute(p,l);if(n===undefined){n=j.find("["+l+"]:selected").attr(l)}if(n===undefined){n=j.find("["+l+"]:checked").attr(l)}if(n===undefined){n=l}if("class"==m){b(p,n,k);return}var o="";if("add"==k.swtch){o=n}else{if("toggle"==k.swtch){o=function(r,q){return q==n?o:n}}else{if("sync"==k.swtch){o=n}}}var i=k.getTarget(p);if(g.fn[m]){g.fn[m].apply(i,o.split("|"))}else{g.fn.attr.apply(i,[m,o])}};var h=function(n){var j=g.jalios.Event.match(n,"broker");if(!j){return}var m=j.type.match(f);if(!m){return}var m=j.type.match(f);var l=m[1];var i=m[2];if(!l||!i){return}n.stopPropagation();var o=j.source.currentTarget;if(l=="run"){return window[i](o)}var k=g.jalios.ToggleManager.getOption(l,j.target,j.position);g.jalios.ToggleManager.toggle(o,i,k)};var c=function(){g(document).on("jalios:broker",h)};g.jalios.ToggleManager={getOption:function(j,k,i){return new a(j,k,i)},toggle:function(l,i,k){if(g.jalios.ToggleManager[i]){k.clazz=false;g.jalios.ToggleManager[i].apply(this,[l,k])}else{if(i.indexOf("data-")==0){k.clazz=false;d(l,i,k)}else{if(k.getAttribute(l,false)){k.clazz=false;d(l,i,k)}}}if(k.clazz){var j=g(l);k.sync=j.hasClass(k.clazz)||j.is(":checked");b(l,i,k)}},checked:function(j,i){i.self=false;i.clazz=true;e(j,"checked",i)},disabled:function(j,i){i.clazz=true;e(j,"disabled",i)},title:function(j,i){d(j,"title",i)},longdesc:function(j,i){d(j,"longdesc",i)},value:function(k,j){var i=g(k);if(i.is("SELECT")){g.each(k.options,function(){j.previous+=" "+g(this).attr("value")})}else{if(i.is("INPUT[type=radio]")){j.previous=g("input[name="+i.attr("name")+"]",k.form).map(function(){return g(this).attr("value")}).get().join(" ")}}d(k,"value",j)}};g(document).ready(function(i){c()})}(window.jQuery);