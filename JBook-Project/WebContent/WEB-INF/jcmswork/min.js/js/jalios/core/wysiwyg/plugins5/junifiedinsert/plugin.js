!function(a){tinymce.PluginManager.add("junifiedinsert",function(e,c){var f=function(g){if(!g||!g.type){return}e.execCommand("JaliosInsert-"+g.type,false,g.attributes)};var d=function(g){var h={ws:e.jcms.getContext().getWorkspace(),configurationId:e.jcms.getContext().configurationId};if(g){h.select=g}a.jalios.ui.Widget.Chooser.openDataChooser("unifiedinsert",f,{params:h,popup:{width:1200,height:800}})};var b=function(){var k=[];var o=e.jcms.getWysiwygEditorInfos();if(o&&o.menuItems){k=o.menuItems}for(var n=0;n<k.length;n++){var g=k[n];if(g.type){continue}g.type="choiceitem";g.value=g.data;delete g.data;const m=/[a-z]+ ([a-z0-9-]+)/;const i=g.icon&&g.icon.match(m);const l=i&&i[1]?i[1]:null;const j=g.image;const h="junifiedinsert-"+g.value;if(l){e.ui.registry.addIcon(h,'<span class="jalios-icon '+l+'"></span>');g.icon=h}else{if(j){e.ui.registry.addIcon(h,'<span class="jalios-icon"><img style="width:1em;" src="'+j+'"></span>');g.icon=h;delete g.image}else{g.icon="junifiedinsert"}}}return k};e.ui.registry.addIcon("junifiedinsert",'<span class="jalios-icon icomoon-plus2"></span>');e.ui.registry.addSplitButton("junifiedinsert",{icon:"junifiedinsert",tooltip:tinymce.i18n.translate("junifiedinsert.btn.tooltip"),onAction:function(){d()},onItemAction:function(g,h){d(h)},fetch:function(h){var g=b();h(g)}});e.addCommand("JaliosInsert-html",function(i,g){if(!g){return}var h=g["data-jalios-html"];if(!h||h.trim()===""){return}e.insertContent(h)})})}(window.jQuery);