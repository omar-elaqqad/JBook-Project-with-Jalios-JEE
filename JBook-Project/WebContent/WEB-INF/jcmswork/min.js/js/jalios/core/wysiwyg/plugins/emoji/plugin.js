!(function(a){tinymce.PluginManager.add("emoji",function(f,e){function d(){return f.id+"_emoji_iframe"}function h(){return('<iframe id="'+d()+'" src="jcore/emoji/emoji.jsp" scrolling="no" style="overflow:hidden;border:0;width:254px;height:337px;"></iframe>')}var g=f.addButton("emoji",{tooltip:tinymce.i18n.translate("emoji.btn.tooltip"),icon:"mce-ico mce-i-emoticons",type:"panelbutton",panel:{role:"application",autohide:true,html:h,minWidth:257,minHeight:340},stateSelector:["img.emoji"]});const c=function(i){f.execCommand("mceInsertContent",false,i.emoji);f.controlManager.buttons.emoji.panel.hide();f.focus()};let emojiPickerIframeIdSelector="#"+d();a(document).on("emoji-selected",emojiPickerIframeIdSelector,c);f.on("remove",function(i){a(document).off("emoji-selected",emojiPickerIframeIdSelector,c)});var b="emoji";f.on("ResolveName",function(i){if(i.target.nodeName=="IMG"&&f.dom.hasClass(i.target,b)){i.name="emoji"}});f.on("SetContent",function(k){a.jalios.Emoji.parse(f.contentWindow.document.body,{className:b,attributes:function i(m,l){return{"data-mce-placeholder":"true","data-mce-resize":"false"}}});var j=a(f.contentWindow.document.body).find("PRE IMG.emoji");j.each(function(){var l=a(this);l.replaceWith(l.attr("alt"))})});f.on("PreInit",function(){f.serializer.addNodeFilter("img",function(j){var k=j.length,m,l,n;while(k--){m=j[k];l=m.attr("class");n=m.attr("alt");if(n&&n!==""&&l&&l.indexOf("emoji")!==-1){m.type=3;m.value=n;m.raw=true}}})})})})(window.jQuery);