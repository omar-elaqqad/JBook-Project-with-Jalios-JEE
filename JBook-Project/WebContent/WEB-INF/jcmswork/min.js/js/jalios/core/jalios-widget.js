!function(g){if(!g.jalios){g.jalios={}}if(!g.jalios.ui){g.jalios.ui={}}var m=function(){g(document).on("focusin","DIV.widget INPUT,DIV.widget SELECT",function(q){var p=g(q.currentTarget);p.getWidget().addClass("focus-widget")});g(document).on("focusout","DIV.widget INPUT,DIV.widget SELECT",function(q){var p=g(q.currentTarget);p.getWidget().removeClass("focus-widget")});g(document).on("input propertychange","DIV.widget INPUT.form-control-autocomplete",function(p){var t=g(this);if(!t.val()){t.next(".form-control").val("");var r=g.jalios.ui.Widget.getWrapper(t);var s=r.find(".input-group-btn .dropdown-toggle");if(s.exists()){var q=r.find(".input-group-btn .btn-remove");if(q.exists()){s.addClass("hide");r.find(".input-group-btn .btn-remove").removeClass("hide")}}}});g(document).on("click","DIV.widget .add-field",f);g(document).on("click","DIV.widget .insert-field",c);g(document).on("click",".js-reveal-password",o);g(document).on("change","DIV.widget.keyword INPUT",function(p){g.jalios.ui.Widget.Keyword.resizeKeyword(g(this));g.jalios.ui.Widget.Keyword.toggleClear.defer(g(this))});g(document).on("keydown input","DIV.widget.keyword INPUT",function(p){g.jalios.ui.Widget.Keyword.resizeKeyword(g(this))});g(document).on("jalios:refresh",function(q){var p=g.jalios.Event.match(q,"refresh","after");if(!p){return}if(p.options&&p.options.fieldAutocomplete){return}if(p.target){e(p.target,!p.options.noscroll)}});g(document).on("jalios:refresh",function(r){var q=g.jalios.Event.match(r,"refresh","before");if(!q||!q.options){return}var p=g(q.options.trigger);if(p.getJcmsId()!="CtxWidget"){return}k(p,q.options.params)})};var e=function(t,y){if(!t){return}var p=g(t);if(p.closest(".no-focus").exists()){return}if(p.hasClass("tab-group-list-item")){return}if(p.hasClass("input-group-list-item")){p.blur();return}var A=p.find(".focus");if(A.exists()){p=A}var v=p.find("input[type=text]:visible, TEXTAREA");var z=g(v[0]);if(z.hasClass("control-wysiwyg")&&!z.closest(".no-focus").exists()){var r=z.closest(".form-group.multilingual");var x=z.closest(".form-group.multivalued");if(r.exists()){var u=x.exists()?r.find(".tab-content > .tab-pane.active  .input-group-list-item.active"):r.find(".tab-content > .tab-pane.active");if(u.exists()){z=g(u.find("TEXTAREA"))}}var q=z.closest(".wysiwyg-editor");if(q.find(".mce-tinymce,.tox-tinymce").exists()){var s=z.tinymce();if(s){s.focus()}return}else{z.closest(".wysiwyg-editor").addClass("focus")}}var w=p.find(":input:visible:first");if(w.closest(".no-focus").exists()){return}if(!w.exists()){return}if(y){w.focusElement();g("html,body").animate({scrollTop:w.offset().top-g(window).height()/2},"fast")}else{w.focusWithoutScrolling()}};var h=function(y,q){var x=y||g.jalios.ui.CtxMenu.$latest;var u=g.jalios.ui.Widget.getWrapper(x);i(u);var v=g.jalios.ui.Widget.Keyword.isInKeyword(x);var A=g.jalios.ui.Widget.getWidget(x).hasClass("multivalued");if(!q&&(v||A)){var w=g(x.getOriginalContext());var t=w.closest(".keep-open").exists();if(t){w.data("dropdown-keep-open",t);w.children().data("dropdown-keep-open",t);x.data("dropdown-keep-open",t)}var p=g.jalios.ui.Widget.getWidget(x);var s=g.jalios.ui.Widget.getWidget(x).hasClass("multilingual");if(s){var z=x.attr("id");var r=parseInt(z.substring(z.lastIndexOf("_")+1));p.find("LI.jalios-input-group INPUT").each(function(){var B=g(this).attr("id");var C=parseInt(B.substring(z.lastIndexOf("_")+1));C=C||0;if(C===r&&g(this).attr("value")===""){JCMS.form.Widget.remove(g(this)[0])}})}else{JCMS.form.Widget.remove(x[0])}return false}};var i=function(r){r.find("INPUT, SELECT, TEXTAREA").each(function(){var u=g(this);if(u.prop("checked")){u.prop("checked",false)}else{if(u.prop("selectedIndex")){u.prop("selectedIndex",0)}else{if(u.is(":not(:radio)")&&u.is(":not(:checkbox)")&&u.is(":not(.wysiwyg-editor-infos)")){u.val("").change();if(u.is(":file")){var t=u.closest(".jalios-publication-filebrowser");if(t.exists()){if(t.is(":input")){}else{var v=t.data("plupload");g.each(v.files,function(x,w){v.removeFile(w)})}}else{var t=u.closest(".control-file.plupload");if(t.exists()){var v=t.data("plupload");g.each(v.files,function(x,w){v.removeFile(w)})}}}}}}});var q=r.find(".input-group-btn");var s=q.find(".dropdown-toggle");if(s.exists()){g.fn.dropdown.clearMenus();var p=q.find(".dropdown-menu");p.find(".edit-item").addClass("hide");p.find(".upload-new-version-item").addClass("hide");p.find(".add-item").removeClass("hide")}r.find(".color-preview").css("background","")};const o=function(p){let $target=g(p.currentTarget);let $passwordInput=$target.closest(".input-group").find(".form-control-password");let type=$passwordInput[0].type;let toggleTitle=$target.data("jalios-toggle-title");$target.data("jalios-toggle-title",$target.attr("title"));$target.attr("title",toggleTitle);$passwordInput.closest(".input-group").toggleClass("is-password-revealed");if(type==="text"){$passwordInput[0].type="password"}else{if(type==="password"){$passwordInput[0].type="text"}}};var c=function(q){q.preventDefault();var p=g(q.currentTarget);f(q,null)};var f=function(t,r){t.preventDefault();var q=g(t.currentTarget);var w=g.jalios.ui.Widget.getWidget(q);var s=w.find(".jalios-nav-pills");var p=s.children().last();var u=p.children();var v=u.data("jalios-fieldgroup");if(v){g("A[data-jalios-fieldgroup="+v+"]").each(function(){var z=g(this);var y=z.closest(".tab-pane.wdglang");var x=y.exists()?y:g.jalios.ui.Widget.getWidget(z);l(x,r)})}else{l(w,r)}};var l=function(q,p){if(g.jalios.Wiki){g.jalios.Wiki.hideWikiToolbar(q)}var r=q.find(".tab-pane.wdglang");if(r.exists()){r.each(function(){b(g(this),p)})}else{b(q,p)}};var b=function(z,A){var x=z.find("OL.input-group-list, UL.input-group-list");var C=g.isNumeric(A)?x.children().eq(A):x.children().last();var v=C.clone();v.removeClass("active");v.insertAfter(C);var p=n(v);v.find(".form-control").each(function(){var D=g(this);n(D,v);if(D.hasClass("control-wysiwyg")){D.css("display","");D.closest(".wysiwyg-editor").find(".mce-tinymce,.tox-tinymce").remove();D.initWysiwyg()}});var w=v.find(".jalios-publication-filebrowser");if(w.exists()){n(w,v);if(w.is(":input")){w.prop("disabled",z.hasClass("disabled"))}else{w.empty();w.jcmsPlupload()}w.removeClass("hide");v.find("INPUT.form-control-display").addClass("hide").prop("disabled",true);v.find("INPUT.form-control-value").addClass("hide").prop("disabled",true)}else{var w=v.find(".control-file.plupload");if(w.exists()){n(w);w.empty();w.jcmsPlupload()}}i(v);var B=z.find(".jalios-nav-pills");var t=B.children().last().clone();t.removeClass("active");B.append(t);if(p){var u=t.children();var y=parseInt(p.substring(p.lastIndexOf("_")+1));u.attr("href","#"+p).html(y+1);var s=u.data("jalios-fieldgroup");if(s){var r=s.substring(0,s.lastIndexOf("_")+1)+y;u.data("jalios-fieldgroup",r);u.attr("data-jalios-fieldgroup",r)}}var q=g.Event("jalios:field");q.field={};q.field.type="addedField";q.field.wrapper=z;q.field.clones=[v,t];g(document).trigger(q)};var n=function(r,t){var s=g(r);var w=s.attr("id");if(w){var u=w.substring(0,w.lastIndexOf("_")+1);var v=parseInt(w.substring(w.lastIndexOf("_")+1))+1;if(t){var p=g(t).attr("id");if(p){v=parseInt(p.substring(p.lastIndexOf("_")+1))}}var q=u+v;s.attr("id",q);return q}return false};var d={UI_EDITOR_COLORCHOOSER:"F",UI_EDITOR_IMAGEPATH:"I",UI_EDITOR_SIMPLEIMAGEPATH:"I",UI_EDITOR_MEDIAPATH:"M",UI_EDITOR_SIMPLEMEDIAPATH:"M",UI_EDITOR_DATECHOOSER:"V",UI_EDITOR_MEMBERCHOOSER:"EHJY",UI_EDITOR_GROUPCHOOSER:"EGY",UI_EDITOR_PUBLICATIONCHOOSER:"ELXMSCcY",UI_EDITOR_PUBLICATIONSCHOOSER:"ELXMSCcY",UI_EDITOR_CATEGORYCHOOSER:"EZY",UI_EDITOR_CATEGORIESCHOOSER:"EZY",UI_EDITOR_WORKSPACECHOOSER:"EOY",UI_EDITOR_QUERYCHOOSER:"QY",UI_EDITOR_ACLCHOOSER:"Y",UI_EDITOR_SQLQUERY:"",UI_EDITOR_DBRECORDCHOOSER:""};var k=function(p,r){var v=p.getWidget();var u=g.jalios.ui.Widget.getWrapper(p);r.items="";var t=v.attr("class").split(/\s+/);for(var s=0;s<t.length;s++){if(!d[t[s]]){continue}r.items+=d[t[s]]}if(u.is("LI")){r.items=(u.parent().is("OL")&&!v.hasClass("nodnd"))?("R"+r.items+"-ATUD-"):(r.items+"-AT-")}else{r.items="R"+r.items}if(v.is("ml")){r.items+="y"}r.lang=g.jalios.ui.Widget.getLanguage(p);var q=u.find("INPUT.formChooserfield");if(!q.exists()){return}r.chooserId=q.val();r.chooserType=v.matchClass(/super_([\w\.]+)/,1)||false};g.jalios.ui.Widget={getWidget:function(q){if(!q){return}var p=g(q);return p.closest("DIV.widget, SPAN.widget")},getWrapper:function(r){if(!r){return}var p=g(r);var q=p.closest("LI, DIV");return q.is(".input-group-btn")?q.parent():q},getLanguage:function(q){if(!q){return}var p=g(q);return p.closest("DIV.wdglang").matchClass(/wdglang-(\S+)/,1)||false},smartFocus:e,clear:h};g.jalios.ui.Widget.Keyword={isInKeyword:function(p){return g.jalios.ui.Widget.getWidget(p).hasClass("keyword")},resizeKeyword:function(p){if(!g.jalios.ui.Widget.Keyword.isInKeyword(p)){return}var q=g(p);q.attr("size",q.val().length||1)},toggleClear:function(p){if(!g.jalios.ui.Widget.Keyword.isInKeyword(p)){return}var q=g(p)}};g.fn.getWidget=function(){return g.jalios.ui.Widget.getWidget(this)};g.fn.smartFocus=function(){return g.jalios.ui.Widget.smartFocus(this)};g.fn.focusWithoutScrolling=function(){if(!this.exists()){return}var p=window.scrollX,r=window.scrollY,q=g(window);this.parents("DIV").each(function(){if(g(this).css("overflow")!="auto"){return}q=g(this);r=q.scrollTop();p=q.scrollLeft();return false});this.focus();q.scrollTop(r);q.scrollLeft(p)};g.fn.toggleDisabledField=function(){g(this).toggleClass("disabled");g(this).find(":input").prop("disabled",function(p,q){return !q});g(this).find("A.ctxLangForm").toggleClass("disabled")};var j=g.fn.addClass;g.fn.addClass=function(p){var q=j.apply(this,arguments);if(this.exists()&&(p=="active"||p=="in")){e(this)}return q};var a=g.fn.removeClass;g.fn.removeClass=function(p){var q=a.apply(this,arguments);if(this.exists()&&(p=="hide"||p=="hide-scroll")){e(this,p=="hide-scroll")}return q};g(document).ready(function(p){m()})}(window.jQuery);