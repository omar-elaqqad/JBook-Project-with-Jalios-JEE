!function(b){var a=function(){b(document).on("jalios:sortable",d)};var d=function(e){var g=b.jalios.Event.match(e,"sortable");if(!g){return}c(g.container,false,false,e.sortable.ui.sender);var f=b(g.container);if(f.children().length==0){f.css("padding-bottom","50px")}};var c=function(e,l,g,m){var p=b(e);if(!p||!p.hasClass("dnd-container")){return}var h=p.hasClass("dnd-single-update");var o=false;if(!l&&m&&!h){o=function(){p.refresh({noscroll:true,nohistory:true})}}var f=b.jalios.Sortable.serialize(p,"dnd-sortable",m);if(h&&m!==null){var k=b.jalios.Sortable.serialize(m,"dnd-sortable-sender");f=b.extend(f,k)}if(l&&!g){var n=b.jalios.Sortable.getSortableKey(p);f[n].push(l)}else{if(l&&g){var n=b.jalios.Sortable.getSortableKey(p);var i=f[n];i.splice(b.inArray(l,i),1)}}var j=p.hasClass("dnd-noresponse")||!l;p.refresh({noscroll:true,nohistory:true,noresponse:j,callback:o,params:f})};if(!b.jalios){b.jalios={}}if(!b.jalios.Sortable){b.jalios.Sortable={}}b.jalios.Sortable.Portal={add:function(f,e){return c(f,e)},remove:function(f,e){return c(f,e,true)},insert:function(f,g,e){if(!f){return}var h=b.jalios.Sortable.Portal.$container;if(!h||!h.exists()){return}b.jalios.Sortable.Portal.add(h,f)},$container:false,openPubChooser:function(g){var e=b(g);var h=e.closest("DIV.dnd-container");var f=g.href;if(!h.exists()){JcmsLogger.warn("Sortable.Portal","openPubChooser(): cannot find container",e,h);return false}b.jalios.Sortable.Portal.$container=h;return Popup.popupWindow(f,"pubChooser",900,500,false,true,true,false)}};b(document).ready(function(e){a()})}(window.jQuery);