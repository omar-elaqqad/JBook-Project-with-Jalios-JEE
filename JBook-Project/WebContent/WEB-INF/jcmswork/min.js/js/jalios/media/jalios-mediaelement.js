!(function(e){if(!e.jalios){e.jalios={}}if(!e.jalios.mediaelement){e.jalios.mediaelement={}}let players=[];e.jalios.mediaelement.init=function(g,h){if(e(h).data("jalios-mediaelement-initialized")){return}e(h).data("jalios-mediaelement-initialized",true);players.push({player:g,domNode:h});g.addEventListener("pause",function(){c(g,h)});let startTime=a(h);if(startTime){g.setCurrentTime(startTime)}};let existingHandler=window.onbeforeunload;window.onbeforeunload=function(g){if(existingHandler){existingHandler(g)}players.forEach(function(h){let player=h.player;let domNode=h.domNode;c(player,domNode)})};const c=function(g,h){let startTime=a(h);let currentTime=Math.floor(g.currentTime);if(startTime!==currentTime){if(d(g,h,currentTime)){f(h)}else{let fileDocId=e(h).data("jalios-filedocument-id");e.ajax({url:"front/media/saveMediaProgression.jsp",method:"post",data:{progression:currentTime,fileDocumentId:fileDocId}})}}};const f=function(g){let fileDocId=e(g).data("jalios-filedocument-id");e.ajax({url:"front/media/completeMediaProgression.jsp",method:"post",data:{fileDocumentId:fileDocId}})};const b=function(g){let fileDocId=e(g).data("jalios-filedocument-id");e.ajax({url:"front/media/deleteMediaProgression.jsp",method:"post",data:{fileDocumentId:fileDocId}})};const d=function(g,h,j){try{let duration=g.duration;let beforeEndPercentage=e(h).data("jalios-mediaprogression-remove-beforeend-percentage");let beforeEndMinimumSeconds=e(h).data("jalios-mediaprogression-remove-beforeend-minimum-seconds");if(beforeEndPercentage===0){beforeEndPercentage=1}let durationEnd=(duration*beforeEndPercentage)/100;if(durationEnd<beforeEndMinimumSeconds){durationEnd=beforeEndMinimumSeconds}durationEnd=duration-durationEnd;return j>durationEnd}catch(i){e.console.log(i);return false}};const a=function(g){let $element=e(g);let startTime=$element.data("jalios-mediaelement-start");return Math.floor(startTime)};e(document).on("jalios:tab",function(h){if(typeof mejs===undefined){return}var g=e(h.tab.pane);g.find(".mejs__container").each(function(){var i=mejs.players[this.id];if(i&&i.resetSize){i.resetSize()}})})})(window.jQuery);