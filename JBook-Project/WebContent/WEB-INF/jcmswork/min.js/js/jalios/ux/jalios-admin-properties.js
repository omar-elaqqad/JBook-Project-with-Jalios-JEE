!function(c){var b=function(){c.jalios.ux.AdminProperties.handleJcmsDB();c(document).on("change","[name=db_jcmsdb]",function(e){c.jalios.ux.AdminProperties.handleJcmsDB(true)});c(document).on("click","[name=derby_network_enabled]",function(e){c.jalios.ux.AdminProperties.handleJcmsDB()});c(document).on("click","#db_check_cnx_jdbc",function(e){c.jalios.ux.AdminProperties.checkJDBC()});c(document).on("click","#db_check_cnx_ds",function(e){c.jalios.ux.AdminProperties.checkDataSource()});c(document).on("click","#ldap_check_cnx",function(e){c.jalios.ux.AdminProperties.checkLDAP()});c(document).on("change","#ldap_predefined_settings",function(e){c.jalios.ux.AdminProperties.handleLDAP()})};var a={mariadb:{db_url:"jdbc:mysql://localhost:3306/jcmsdb?jdbcCompliantTruncation=false&useSSL=false&useFractionalSeconds=false"},mysql:{db_url:"jdbc:mysql://localhost:3306/jcmsdb?jdbcCompliantTruncation=false&useUnicode=true&characterEncoding=UTF-8&useSSL=false&useFractionalSeconds=false"},oracle:{db_url:"jdbc:oracle:thin:@localhost:1521:SID"},"oracle-xe":{db_url:"jdbc:oracle:thin:@localhost:1521:XE"},postgresql:{db_url:"jdbc:postgresql://localhost:5432/jcmsdb"},sqlserver:{db_url:"jdbc:sqlserver://localhost:1433;databaseName=master"},db2:{db_url:"jdbc:db2://localhost:50000/jcmsdb"},"derby-remote":{db_url:"jdbc:derby://localhost:1527/jcmsdb"},derby:{db_url:""}};var d={active_directory:{ldap_server_userfilter:"(&(objectClass=person)(objectClass=user)(userPrincipalName={0})(!(userAccountControl:1.2.840.113556.1.4.803:=2)))",ldap_server_userobjectclass:"user",ldap_mapping_login:"userPrincipalName",ldap_mapping_name:"sn",ldap_mapping_firstName:"givenName",ldap_mapping_salutation:"",ldap_mapping_jobTitle:"title",ldap_mapping_department:"department",ldap_mapping_manager:"manager",ldap_mapping_mail:"mail",ldap_mapping_phone:"telephoneNumber",ldap_mapping_mobile:"mobile",ldap_mapping_street:"streetAddress",ldap_mapping_postalCode:"postalCode",ldap_mapping_poBox:"postOfficeBox",ldap_mapping_region:"st",ldap_mapping_locality:"l",ldap_mapping_country:"c",ldap_mapping_language:"preferredLanguage",ldap_mapping_address:"",ldap_mapping_info:"description",ldap_server_groupfilter:"(&(objectClass=group)(member={0}))",ldap_server_groupobjectclass:"group",ldap_grpmapping_name:"cn",ldap_grpmapping_member:"member",ldap_grpmapping_uuid:"objectGUID"},open_ldap_posix:{ldap_server_userfilter:"(&(objectClass=inetOrgPerson)(objectClass=posixAccount)(uid={0}))",ldap_server_userobjectclass:"posixAccount",ldap_mapping_login:"uid",ldap_mapping_name:"sn",ldap_mapping_firstName:"givenName",ldap_mapping_salutation:"",ldap_mapping_jobTitle:"title",ldap_mapping_department:"",ldap_mapping_manager:"manager",ldap_mapping_mail:"mail",ldap_mapping_phone:"telephoneNumber",ldap_mapping_mobile:"mobile",ldap_mapping_street:"streetAddress",ldap_mapping_postalCode:"postalCode",ldap_mapping_poBox:"postOfficeBox",ldap_mapping_region:"st",ldap_mapping_locality:"l",ldap_mapping_country:"c",ldap_mapping_language:"preferredLanguage",ldap_mapping_address:"",ldap_mapping_info:"description",ldap_server_groupfilter:"(&(objectClass=posixGroup)(memberUid={0}))",ldap_server_groupobjectclass:"posixGroup",ldap_grpmapping_name:"cn",ldap_grpmapping_member:"memberUid",ldap_grpmapping_uuid:""},open_ldap_unique:{ldap_server_userfilter:"(&(objectClass=inetOrgPerson)(objectClass=posixAccount)(uid={0}))",ldap_server_userobjectclass:"posixAccount",ldap_mapping_login:"uid",ldap_mapping_name:"sn",ldap_mapping_firstName:"givenName",ldap_mapping_salutation:"",ldap_mapping_jobTitle:"title",ldap_mapping_department:"",ldap_mapping_manager:"manager",ldap_mapping_mail:"mail",ldap_mapping_phone:"telephoneNumber",ldap_mapping_mobile:"mobile",ldap_mapping_street:"streetAddress",ldap_mapping_postalCode:"postalCode",ldap_mapping_poBox:"postOfficeBox",ldap_mapping_region:"st",ldap_mapping_locality:"l",ldap_mapping_country:"c",ldap_mapping_language:"preferredLanguage",ldap_mapping_address:"",ldap_mapping_info:"description",ldap_server_groupfilter:"(&(objectClass=groupOfNames)(member={0}))",ldap_server_groupobjectclass:"groupOfUniqueNames",ldap_grpmapping_name:"cn",ldap_grpmapping_member:"member",ldap_grpmapping_uuid:""}};if(!c.jalios){c.jalios={}}if(!c.jalios.ux){c.jalios.ux={}}c.jalios.ux.AdminProperties={handleJcmsDB:function(j){var i=c("[name=db_jcmsdb]");var g=i.closest("FORM");var e=c(".db_configuration");var f=i.val();if(j){g.populate(a[f])}var h=("derby"==f)&&c("[name=derby_network_enabled]:checked",g).val()=="false";c("#db_derby_configuration").toggleClass("disabled",h).find("INPUT, SELECT, BUTTON").attr("disabled",h);c(".derby_network").toggle("derby"==f);e.toggle("derby"!=f);if("derby-remote"==f){e.find("[name=db_username]").val("APP").attr("disabled","disabled").closest("DIV").find("A").hide()}else{if("derby != db"){e.find("[name=db_username]").attr("disabled",false).closest("DIV").find("A").show()}}},handleLDAP:function(){var e=c("#editForm");var g=c("[name=ldap_synchronize_enable]:checked",e).val()=="false";e.named(["ldap_mapping_login","ldap_mapping_name","ldap_mapping_firstName","ldap_mapping_salutation","ldap_mapping_organization","ldap_mapping_jobTitle","ldap_mapping_mail","ldap_mapping_phone","ldap_mapping_mobile","ldap_mapping_street","ldap_mapping_postalCode","ldap_mapping_poBox","ldap_mapping_region","ldap_mapping_locality","ldap_mapping_country","ldap_mapping_address","ldap_mapping_info","ldap_server_groupsuffix","ldap_server_groupfilter","ldap_server_groupobjectclass","ldap_synchronizegroups_enable","ldap_grpmapping_name","ldap_grpmapping_member","ldap_grpmapping_uuid"]).attr("disabled",g);var f=c("#ldap_predefined_settings :selected").val()||"active_directory";e.populate(d[f])},toggleStatus:function(h,g,f,e,i){if(0==e){h.addClass("disabled").attr("disabled",true);g.attr("src","images/jalios/icons/waitsmall.gif").show();f.html("")}else{if(1==e){h.removeClass("disabled").attr("disabled",false);g.attr("src","images/jalios/icons/tick.gif");f.html("Connection established successfully.")}else{if(-1==e){h.removeClass("disabled").attr("disabled",false);g.attr("src","images/jalios/icons/warnSmall.gif");f.html(i)}}}},checkConnection:function(j,f,e,h,k){c.jalios.ux.AdminProperties.toggleStatus(j,f,e,0);var g=c("#editForm");var i=c.ajax({url:h,data:c.param(g.serializeObject(k),true)}).done(function(l){if("ok"==l){c.jalios.ux.AdminProperties.toggleStatus(j,f,e,1)}else{c.jalios.ux.AdminProperties.toggleStatus(j,f,e,-1,l)}});i.fail(function(l,m){c.jalios.ux.AdminProperties.toggleStatus(j,f,e,-1,m)})},checkJDBC:function(){c.jalios.ux.AdminProperties.checkConnection(c("#db_check_cnx_jdbc"),c("#db_check_cnx_jdbc_icon"),c("#db_check_cnx_jdbc_msg"),"admin/properties/ajaxJDBC.jsp",{db_jcmsdb:"",db_url:"",db_username:"",db_password:""})},checkDataSource:function(){c.jalios.ux.AdminProperties.checkConnection(c("#db_check_cnx_ds"),c("#db_check_cnx_ds_icon"),c("#db_check_cnx_ds_msg"),"admin/properties/ajaxDataSource.jsp",{db_jcmsdb:"",db_datasource:""})},checkLDAP:function(){c.jalios.ux.AdminProperties.checkConnection(c("#ldap_check_cnx"),c("#ldap_check_cnx_icon"),c("#ldap_check_cnx_msg"),"admin/properties/ajaxLDAP.jsp",{ldap_server_hostname:"",ldap_server_port:"",ldap_server_ssl:"",ldap_server_login:"",ldap_server_password:""})}};c(document).ready(function(e){b()})}(window.jQuery);