!function(g){var d=function(i){var h=0;g(".bookmark-list-view .table-bookmarks .bookmarks-checkbox:checkbox:checked").each(function(){h++});g(".bookmark-item-action").each(function(){if(h>0){g(this).removeClass("bookmark-action-disabled");g(this).parent().removeClass("disabled")}else{g(this).addClass("bookmark-action-disabled");g(this).parent().addClass("disabled")}})};var b=function(h){var i=g(".table-bookmarks .bookmarks-checkbox-all").first().is(":checked");g(".bookmark-list-view .table-bookmarks .bookmarks-checkbox:checkbox").each(function(){g(this).prop("checked",i)});d(h)};var c=function(j){if(g(this).hasClass("bookmark-action-disabled")){return false}var i=g(j.currentTarget);var h=i.prop("href");g(".bookmark-list-view .table-bookmarks .bookmarks-checkbox:checkbox:checked").each(function(){h+="&itemIds="+this.value});g.jalios.ui.Modal.openFromUrl(h)};var f=function(i){g(".bookmark-draggable-item").draggable({opacity:0.5,helper:"clone",refreshPositions:true,revert:"invalid",revertDuration:0,scroll:true,delay:0,cursor:"move"});g(".bookmark-droppable").each(function(){g(this).droppable({tolerance:"pointer",hoverClass:"bookmark-droppable-target",drop:function(q,p){var m=g(p.draggable).data("jalios-bookmark-folder_id");var l=g(p.draggable).data("jalios-bookmark-id");if(g(q.target).hasClass("bookmark-separator")){var n=g(q.target).data("jalios-item-index");var k="plugins/BookmarksPlugin/jsp/processAction.jsp?opReorder=true&itemIndex="+n+"&dataId="+l;g.ajax({url:k,type:"POST",success:function(r){g(".bookmark-menu.slide-wrapper").refresh();g(".bookmark-list-view").refresh({params:{bookmarkFolderId:m}})}})}else{var o=g(q.target).data("jalios-bookmark-id");var k="plugins/BookmarksPlugin/jsp/processAction.jsp?opBookmarkFolderDrop=true&bookmarkFolderIdTarget="+o+"&dataId="+l+"&bookmarkFolderId="+m;g.ajax({url:k,type:"POST",success:function(r){g(".bookmark-menu.slide-wrapper").refresh();g(".bookmark-list-view").refresh({params:{bookmarkFolderId:m}})}})}}})});var j=window.navigator.msMaxTouchPoints;var h="ontouchstart" in document.createElement("div");if(j||h){g(".bookmark-actions").addClass("bookmark-sortable-item-touch-device");g(".table-bookmarks").removeClass("table-hover")}};var a=function(){g(document).on("jalios:refresh",function(i){var h=g.jalios.Event.match(i,"refresh","after");if(!h){return}var j=i.refresh.target;if(j.hasClass("bookmarks-full-display")&&i.refresh.options&&i.refresh.options.params&&(i.refresh.options.params.opBookmarkDelete==="true"||i.refresh.options.params.opBookmarkFolderDelete==="true")){g(".bookmark-menu").refresh()}if(j.hasClass(".sidebar-bookmarks")){j.find(".bookmark-breadcrumb ul  li:first").focus()}return})};var e=function(){g(document).on("change",".bookmarks-checkbox-all",b);g(document).on("change",".bookmarks-checkbox",d);g(document).on("click",".bookmark-list-view .bookmark-item-action",c);g(document).on("jalios:refresh",function(i){var h=g.jalios.Event.match(i,"refresh","after");if(!h){return}var j=i.refresh.target;if(!j.hasClass("bookmark-menu")&&!j.hasClass("app-bookmark-body")&&!j.hasClass("PortletWorkspaceBookmarks")){return}f()});a();f()};g(document).ready(function(h){e()})}(window.jQuery);