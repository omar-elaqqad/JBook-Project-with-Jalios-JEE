(function(e,f,g,d){const i=function(j){h(j);e(g).on("jalios:refresh",b)};const b=function(j){let refresh=e.jalios.Event.match(j,"refresh","after");if(!refresh||!refresh.target){return}h(j)};const a=function(j){let $target=e(j.target);let $urlDiv=$target.closest("[data-jalios-csp-transform-contact-to-guest-url]");let convertUrl=$urlDiv.length?$urlDiv.data("jalios-csp-transform-contact-to-guest-url"):d;if(!convertUrl){return false}let $card=e(j.currentTarget).closest(".card-member");if(!$card.length){return false}let mid=$card.attr("data-jalios-data-id");let $modal=$card.closest("FORM").closest("[data-jalios-ajax-refresh-url]");if(!$modal.length){return false}$modal.attr("data-jalios-ajax-refresh-url",convertUrl+"?contact="+mid);e(":input[name=proposedMemberId]").val(mid);let $opNext=$card.closest("FORM").find(":input[name=opNext]");if($opNext.exists()){j.preventDefault();j.stopImmediatePropagation();$opNext.click()}};const c=function(j){let $selectBtn=e(j.target);if(!$selectBtn.length){return}let $card=$selectBtn.closest(".card-member-guest-proposition");let mid=$selectBtn.data("jalios-data-id");if(!mid){return}e(":input[name=proposedMemberId]").val(mid);let $opNext=$card.closest("FORM").find(":input[name=opNext]");if($opNext.exists()){j.preventDefault();j.stopImmediatePropagation();$opNext.click()}};const h=function(j){if(!e(".card-cs-guest-layout").length){return}e(".card-member-guest-proposition").each(function(k,l){let $card=e(this);let mid=$card.data("jalios-data-id");let $btnTarget=$card.find(".card-front .card-block:first-child");let $btn=e('.btn-guest-mbr-proposition[data-jalios-data-id="'+mid+'"]');if($btn.length&&$btnTarget.length){$btnTarget[0].after($btn[0])}let $cardFlipper=$card.find(".card-flipper");$cardFlipper.remove();let $emailTarget=$card.find(".card-front .card-block:first-child .card-block-item");let $email=$card.find("DIV.member-email");if($email.length&&$emailTarget.length){$emailTarget[0].append($email[0])}});e(".card-cs-guest-layout .btn-select-mbr").on("click",c);e(".card-cs-guest-layout .convert-contact-to-guest-btn").on("click",a)};e(g).ready(function(j){i(j)})}(jQuery,window,document));