!function(a){let _init=false;let img;let $header=a("#cs-header");let mirrorHeader=function(b){if(!b){return}if(!b.mirrorX&&!b.mirrorY){return}let canvas=a("<CANVAS>")[0];let ctx=canvas.getContext("2d");if(a.JCMS.jcmsplugin.cs.HeaderUtils._debug){a(".cs-body CANVAS.header-canvas").remove();a(".cs-body").prepend(canvas);a(canvas).css("outline","2px solid blue");a(canvas).addClass("header-canvas")}canvas.width=img.width*(b.mirrorX?2:1);canvas.height=img.height*(b.mirrorY?2:1);ctx.drawImage(img,0,0);if(b.mirrorY){ctx.scale(1,-1);ctx.translate(0,-img.height);ctx.drawImage(img,0,-img.height,img.width,img.height);ctx.translate(0,img.height);ctx.scale(1,-1)}if(b.mirrorX){ctx.scale(-1,1);ctx.translate(-img.width,0);ctx.drawImage(img,-img.width,0,img.width,img.height);ctx.scale(-1,1);ctx.translate(-img.width,0)}if(b.mirrorX&&b.mirrorY){ctx.scale(-1,-1);ctx.translate(-img.width,-img.height);ctx.drawImage(img,-img.width,-img.height,img.width,img.height)}let dataURL=canvas.toDataURL();$header.css({"background-image":"url("+dataURL+")"});a.JCMS.jcmsplugin.cs.HeaderUtils.canvas=canvas};if(!a.JCMS){a.JCMS={}}if(!a.JCMS.jcmsplugin){a.JCMS.jcmsplugin={}}if(!a.JCMS.jcmsplugin.cs){a.JCMS.jcmsplugin.cs={}}a.JCMS.jcmsplugin.cs.HeaderUtils={_debug:false,canvas:null,initMirror:function(c,b){img=new Image();a(img).on("load",function(d){mirrorHeader(b)});img.src=c},getMirrorParams:function(){let $header=a("#cs-header");let mirrorBoth=$header.hasClass("cs-header-mirror");let mirrorX=mirrorBoth||$header.hasClass("cs-header-mirror-x");let mirrorY=mirrorBoth||$header.hasClass("cs-header-mirror-y");return{mirrorX:mirrorX,mirrorY:mirrorY}}};let register=function(){if(_init){return}_init=true;JcmsLogger.info("CollaborativeSpace Plugin","Init header mirroring")};a(document).ready(function(b){register()})}(window.jQuery);