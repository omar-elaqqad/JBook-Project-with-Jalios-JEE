!(function(e){const b="plugins/CollaborativeSpacePlugin/jsp/portal/collaborativeSpaceActions.jsp";if(!e.plugin){e.plugin={}}e.plugin.CollaborativeSpace={getCSId:function(){return e(".cs-portal").data("jalios-data-id")},getJPortalId:function(){return e(".cs-portal").data("jalios-jportal-id")},refreshPortletWithUpdatedParams:function(i){let $portlet=e("div[data-portlet-id="+i+"]");e.jalios.AjaxRefresh.refreshPortlet(i,function(){$portlet.find(".ajax-loading-component").remove()},null,{noscroll:true});$portlet.displayLoading();e.jalios.jportal.utils.refreshJPortalCSS()}};const d=function(i){let $trigger=e(i.currentTarget);e.ajax({url:b,data:{opToggleFavorite:true},type:"post"}).done(function(j){toastr.options={positionClass:"toast-top-center"};toastr.info(j.message);$trigger.html(j.data.menuImage+j.data.label)})};const g=function(i){let url=new URL("plugins/CollaborativeSpacePlugin/jsp/portal/editApplicationModal.jsp",document.baseURI);url.searchParams.set("editedPortlet",i.closest("LI.cs-tab").data("portlet-id"));url.searchParams.set("id",i.closest("LI.cs-tab").data("portlet-id"));url.searchParams.set("jportal",e.plugin.CollaborativeSpace.getJPortalId());url.searchParams.set("applicationEdit",true);e.jalios.ui.Modal.openFromUrl(url.href)};const f=function(i){e.jalios.ui.Modal.confirm(e("#cs-header-tabs > .nav-tabs").data("remove-app-confirm-message"),function(){e.ajax({url:b,traditional:true,method:"post",data:{appId:i.closest("LI.cs-tab").data("portlet-id"),opRemoveApp:true,csId:e.plugin.CollaborativeSpace.getCSId()},success:function(j){e.jalios.Browser.redirect(e("#TabHeader_home a").prop("href"))}})})};const h=function(){e(document).on("click keydown","[data-jalios-cs-action]",function(i){if(!e.jalios.a11y.isFocusedClick(i)){return}i.preventDefault();i.stopPropagation();let $trigger=e(i.currentTarget);let actionName=$trigger.data("jalios-cs-action");switch(actionName){case"toggleMetas":a($trigger);break;case"deleteTab":f($trigger);break;case"updateTab":g($trigger);break;case"toggle-favorite":d(i);break;default:}})};let _init=false;const c=function(){if(_init){return}_init=true;e(document).on("jalios:refresh",function(i){if(i.refresh.type==="serialize"){if(i.refresh.url==="jcore/wysiwyg/wysiwygInline.jsp"){i.refresh.options.params.csOverride=true;i.refresh.options.params.collaborativeSpace=e.plugin.CollaborativeSpace.getCSId()}}});h()};const a=function(i){let $metaWrapper=e(".cs-metas-wrapper");if(!$metaWrapper.exists()){return}let options=e.jalios.ToggleManager.getOption("toggle",".cs-metas-wrapper","closest");e.jalios.ToggleManager.toggle(i,"opened",options);if(e(".cs-metas-wrapper.opened").exists()){i.attr("title",i.find(".cs-hide-metas-label").data("jalios-button-title"))}else{i.attr("title",i.find(".cs-show-metas-label").data("jalios-button-title"))}if($metaWrapper.find("VIDEO").exists()){if(typeof Event==="function"){window.dispatchEvent(new Event("resize"))}else{let event=window.document.createEvent("UIEvents");event.initUIEvent("resize",true,false,window,0);window.dispatchEvent(event)}}};e(document).ready(function(i){c()})})(window.jQuery);