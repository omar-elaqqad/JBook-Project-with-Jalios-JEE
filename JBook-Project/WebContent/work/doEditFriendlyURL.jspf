<%--
 @Summary: This JSP responsible for the edition of FriendlyURL of Data, is statically
           included by some Data editors (such as doEditCommonPubAttribute and editCat.jsp)
--%><%
  Data dataEdited = (Data) request.getAttribute("data");
  com.jalios.jcms.FriendlyURLManager friendlyURLMgr = com.jalios.jcms.FriendlyURLManager.getInstance();
  if (json_bridge != null && friendlyURLMgr != null) {
    json_bridge.registerObject("FriendlyURLManager", friendlyURLMgr);
  }
  String furlInputHtmlAttribute = (dataEdited != null) ? ("autocomplete='off' data-jalios-id='" + dataEdited.getId() + "'") : "";
%>

	<jalios:field label="ui.com.lbl.friendly-urls" name="friendlyURL" css='nodnd' mv="1" value='<%= formHandler.getAvailableFriendlyURLSet() %>' disabled='<%= formHandler.getFieldStatus("friendlyURL").isDisabled() %>'>
	  <jalios:control settings='<%= new TextFieldSettings().htmlAttributes(furlInputHtmlAttribute) %>' />
  
    <jalios:buffer name="WIDGET_APPEND">
      <% if (isWSAdmin) { %>
       <span class="help-block"><a href="work/friendlyURLsWS.jsp" target="friendlyURLs"><%= glp("ui.work.form.friendly-url.show-all")%></a></span>
      <% } %>
      
      <jalios:message level='<%= MessageLevel.ERROR %>' css="newFriendlyURLInvalidWarning hide">
      <%= glp("msg.edit.friendly-url.invalid", channel.getProperty("friendly-url.invalid-pattern")) %>
      </jalios:message>
      
      <jalios:message level='<%= MessageLevel.ERROR %>' msg="msg.edit.friendly-url.unavailable" css="newFriendlyURLExistWarning hide" />
    </jalios:buffer>
    
  </jalios:field>
  
<% jcmsContext.addJavaScript("js/jalios/ux/jalios-friendly-urls.js"); %>              
